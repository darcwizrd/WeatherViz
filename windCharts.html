<html>
  <head>
       <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8" />
      <title>Windy Wind</title>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
           <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCODD0zuyc6EUM-Te7rcZgKJjW0pABs5NA"
    async defer></script>
        
      
<link rel="stylesheet" type="text/css" href="style.css">   
    
  </head>
    
     <script>
     google.charts.load('upcoming', {'packages':['corechart', 'controls', 'geomap']});
    google.charts.setOnLoadCallback(getData);
        
        
      function getData() {

          var dataQuery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1sOBZMSB7ygfPTiYu3eWsFkmsjazKJOqBsKTeTw3GO9w/edit?');
          dataQuery.send(handleQuery);
          
      }
         
        
        function handleQuery(response){
            var data = response.getDataTable();
            
            var latArray = data.getDistinctValues('B');
            var lngArray = data.getDistinctValues('C');
            var degreeArray = data.getDistinctValues('D');
            
            drawMap(latArray,lngArray,degreeArray);
            
        }
         
           function drawMap(latitude, longitude, degree) {
               
               console.log(latitude);
               console.log(longitude);
               
        var map = new google.maps.Map(document.getElementById('map_div'), {
          zoom: 5,
          center: {lat: 37.09024, lng: -95.712891},
          mapTypeId: 'terrain'
        });

            var lineSymbol = {
            path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW
                };
                 
                 for(i = 0; i < latitude.length; i++){
                    var marker = new google.maps.Marker({
                        position: {lat: latitude[i], lng: longitude[i]},
                        icon: {
                        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
                        scale: 5,
                        rotation: degree[i]
                        },
                        map: map
                    }); 
                 }
             }

     
    </script>
 
    
  <body>
    
      <h1 id="title">Wind Direction</h1>
      
    <!--Div that will hold the dashboard-->
    <div id="dashboard_div">
      <!--Divs that will hold each control and chart-->
        <div id="map_div"></div>
    </div>
      
      
  </body>
</html>